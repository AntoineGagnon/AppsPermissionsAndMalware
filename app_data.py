"""
Created by: 

"""
from enum import Enum

from peewee import SqliteDatabase, Model, CharField, TextField, FloatField, IntegerField, ForeignKeyField, BooleanField


class DL(Enum):
    NOT_CHECKED = 0
    EXISTS = 1
    NOT_EXIST = 2


db = SqliteDatabase('app_permissions.db')


class App(Model):
    app = CharField()
    package = CharField()
    category = CharField()
    description = TextField()
    rating = FloatField()
    number_of_ratings = IntegerField()
    price = FloatField()
    downloads = IntegerField()
    has_gplay = BooleanField()
    dl_available = IntegerField()
    virus_total_resource = TextField(null=True)

    class Meta:
        database = db


class Permission(Model):
    name = CharField()
    description = TextField()
    protection_level = CharField(null=True)

    class Meta:
        database = db


class AccessPermission(Model):
    permission = ForeignKeyField(Permission, backref="access")
    app = ForeignKeyField(App, backref="permissions")

    class Meta:
        database = db


class AVReport(Model):
    app = ForeignKeyField(App, backref="avreport")
    number_warning = IntegerField()
    total_number = IntegerField()

    class Meta:
        database = db


db.connect()
db.create_tables([App, Permission, AccessPermission, AVReport])
